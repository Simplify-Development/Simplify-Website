{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/vebjo/Documents/GitHub/Simplify-Website/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/vebjo/Documents/GitHub/Simplify-Website/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/vebjo/Documents/GitHub/Simplify-Website/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./style.css';import React from'react';import{getUserDetails}from'../../../utils/api';import{Link}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function NavLoginDashboard(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),loggedIn=_React$useState2[0],setLoggedIn=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),user=_React$useState4[0],setUser=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),open=_React$useState6[0],setOpen=_React$useState6[1];function logout(){return _logout.apply(this,arguments);}function _logout(){_logout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"https://simplify-code.com/api/logout\",{id:user.discordId}).then(function(){setLoggedIn(false);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _logout.apply(this,arguments);}React.useEffect(function(){if(user)setLoggedIn(true);getUserDetails().then(function(_ref){var data=_ref.data;setLoggedIn(true);setUser(data);}).catch(function(){setLoggedIn(false);});},[]);if(loggedIn){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"navLogin \"+(open?\"open\":\"\"),onClick:function onClick(){return setOpen(!open);},children:[/*#__PURE__*/_jsx(\"img\",{className:\"navLogin-avatar\",src:user.avatar,alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{className:\"navLogin-username\",children:user.username}),/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-caret-down\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"menu \"+(open?\"open\":\"\"),children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Home\"})}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard/report\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Report\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"logout\",onClick:logout,children:\"Logout\"})]})]});}else{return/*#__PURE__*/_jsx(\"button\",{className:\"login\",onClick:function onClick(){return window.location.href=\"https://simplify-code.com/api/auth/discord\";},children:\"Login\"});}}","map":{"version":3,"sources":["C:/Users/vebjo/Documents/GitHub/Simplify-Website/client/src/pages/components/navLogin/dashboard.jsx"],"names":["React","getUserDetails","Link","axios","NavLoginDashboard","useState","loggedIn","setLoggedIn","user","setUser","open","setOpen","logout","post","id","discordId","then","useEffect","data","catch","avatar","username","window","location","href"],"mappings":"ugBAAA,MAAO,aAAP,CACA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,cAAT,KAA+B,oBAA/B,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,MAAO,SAASC,CAAAA,iBAAT,EAA6B,qBAEAJ,KAAK,CAACK,QAAN,CAAe,KAAf,CAFA,oDAEzBC,QAFyB,qBAEfC,WAFe,0CAGRP,KAAK,CAACK,QAAN,CAAe,IAAf,CAHQ,qDAGzBG,IAHyB,qBAGnBC,OAHmB,0CAIRT,KAAK,CAACK,QAAN,CAAe,KAAf,CAJQ,qDAIzBK,IAJyB,qBAInBC,OAJmB,6BAMjBC,CAAAA,MANiB,4HAMhC,yJACUT,CAAAA,KAAK,CAACU,IAAN,CAAW,sCAAX,CAAmD,CAAEC,EAAE,CAAEN,IAAI,CAACO,SAAX,CAAnD,EAA2EC,IAA3E,CAAgF,UAAM,CACxFT,WAAW,CAAC,KAAD,CAAX,CACH,CAFK,CADV,uDANgC,yCAYhCP,KAAK,CAACiB,SAAN,CAAgB,UAAM,CAClB,GAAIT,IAAJ,CAAUD,WAAW,CAAC,IAAD,CAAX,CACVN,cAAc,GACTe,IADL,CACU,cAAc,IAAXE,CAAAA,IAAW,MAAXA,IAAW,CACjBX,WAAW,CAAC,IAAD,CAAX,CACAE,OAAO,CAACS,IAAD,CAAP,CACF,CAJL,EAIOC,KAJP,CAIa,UAAM,CACXZ,WAAW,CAAC,KAAD,CAAX,CACH,CANL,EAOH,CATD,CASG,EATH,EAWA,GAAID,QAAJ,CAAc,CACV,mBACI,oCACI,aAAK,SAAS,CAAE,aAAeI,IAAI,CAAG,MAAH,CAAY,EAA/B,CAAhB,CAAoD,OAAO,CAAE,yBAAMC,CAAAA,OAAO,CAAC,CAACD,IAAF,CAAb,EAA7D,wBACI,YAAK,SAAS,CAAC,iBAAf,CAAiC,GAAG,CAAEF,IAAI,CAACY,MAA3C,CAAmD,GAAG,CAAC,EAAvD,EADJ,cAEI,aAAM,SAAS,CAAC,mBAAhB,UAAqCZ,IAAI,CAACa,QAA1C,EAFJ,cAGI,UAAG,KAAK,CAAC,mBAAT,EAHJ,GADJ,cAMI,aAAK,SAAS,CAAE,SAAWX,IAAI,CAAG,MAAH,CAAY,EAA3B,CAAhB,wBACI,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,uBAAa,2BAAb,EADJ,cAEI,KAAC,IAAD,EAAM,EAAE,CAAC,mBAAT,uBAA6B,6BAA7B,EAFJ,cAGI,UAAG,SAAS,CAAC,QAAb,CAAsB,OAAO,CAAEE,MAA/B,oBAHJ,GANJ,GADJ,CAcH,CAfD,IAeO,CACH,mBACQ,eAAQ,SAAS,CAAC,OAAlB,CAA0B,OAAO,CAAE,yBAAMU,CAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,6CAAN,EAAnC,mBADR,CAGH,CACJ","sourcesContent":["import './style.css'\r\nimport React from 'react'\r\nimport { getUserDetails } from '../../../utils/api'\r\nimport { Link } from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\nexport function NavLoginDashboard() {\r\n\r\n    const [loggedIn, setLoggedIn] = React.useState(false)\r\n    const [user, setUser] = React.useState(null)\r\n    const [open, setOpen] = React.useState(false)\r\n\r\n    async function logout() {\r\n        await axios.post(\"https://simplify-code.com/api/logout\", { id: user.discordId }).then(() => {\r\n            setLoggedIn(false)\r\n        })\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (user) setLoggedIn(true)\r\n        getUserDetails()\r\n            .then(({ data }) => {\r\n               setLoggedIn(true)\r\n               setUser(data)\r\n            }).catch(() => {\r\n                setLoggedIn(false)\r\n            })\r\n    }, [])\r\n\r\n    if (loggedIn) {\r\n        return (\r\n            <div>\r\n                <div className={\"navLogin \" + (open ? \"open\" : \"\")} onClick={() => setOpen(!open)}>\r\n                    <img className=\"navLogin-avatar\" src={user.avatar} alt=\"\" />\r\n                    <span className=\"navLogin-username\">{user.username}</span>\r\n                    <i class=\"fas fa-caret-down\"></i>\r\n                </div>\r\n                <div className={\"menu \" + (open ? \"open\" : \"\")}>\r\n                    <Link to=\"/\"><p>Home</p></Link>\r\n                    <Link to=\"/dashboard/report\"><p>Report</p></Link>\r\n                    <p className=\"logout\" onClick={logout}>Logout</p>\r\n                </div>\r\n            </div>\r\n        )\r\n    } else {\r\n        return (\r\n                <button className=\"login\" onClick={() => window.location.href = `https://simplify-code.com/api/auth/discord`}>Login</button>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}